/** @type { import('@storybook/react').Preview } */
import React from "react";
import { TractorbeamProvider } from "../src/components/tractorbeam-provider";
import { Preview } from "@storybook/react";
import TractorbeamAI from "@tractorbeamai/backend";

const preview: Preview = {
    loaders: [
        async () => {
            const tb = new TractorbeamAI(
                "pk_LS0tLS1CRUdJTiBQVUJMSUMgS0VZLS0tLS0KTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUFyU1JVNkdKcUZvWUVXSHhWT3ZWVApHb3FobUZ0R3pYNDUxVjhFbWpiZzZ3RnQxc3dFU2gyN1M4UC9IUG55Z0xpQStyNzA1R2M1NG9Id2RHbkR0bHVkCkZyWEVydElVb1RrSEtNUEtiZklFdCtzM1FyT3RmSzNQbFo1c0tpU1FjY0tOOFVSWUNTblFSc3ExNUpEN3hvb1QKcExQUXAxc25sQW04OFFwdlUvTlk1d1NHZVRZNzJIczJVekZ5RUhZQUZ2VmVDUG9FSHpVWFRmUk5CWEJzbzh4agpta2k3WEszTDhMaUgrTGtvcXVLcFVYNStGeEgzRU5ERUs4bTJjdVFXOUNqQW1tVmRHRVdlLzJrcHZTU3UzVG5kCjhpakVsOEFyM2IxdDAvNXRnTHJaTGxzYjg3Q2tiazN3TDdlNlhoM1lBUXExcXdIWlZWSFdVSjhDZ0VEVWczQjcKZFFJREFRQUIKLS0tLS1FTkQgUFVCTElDIEtFWS0tLS0tCg==",
                "sk_LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2QUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktZd2dnU2lBZ0VBQW9JQkFRQ3RKRlRvWW1vV2hnUlkKZkZVNjlWTWFpcUdZVzBiTmZqblZYd1NhTnVEckFXM1d6QVJLSGJ0THcvOGMrZktBdUlENnZ2VGtaem5pZ2ZCMAphY08yVzUwV3RjU3UwaFNoT1Fjb3c4cHQ4Z1MzNnpkQ3M2MThyYytWbm13cUpKQnh3bzN4UkZnSktkQkd5clhrCmtQdkdpaE9rczlDbld5ZVVDYnp4Q205VDgxam5CSVo1Tmp2WWV6WlRNWElRZGdBVzlWNEkrZ1FmTlJkTjlFMEYKY0d5anpHT2FTTHRjcmN2d3VJZjR1U2lxNHFsUmZuNFhFZmNRME1RcnliWnk1QmIwS01DYVpWMFlSWjcvYVNtOQpKSzdkT2QzeUtNU1h3Q3ZkdlczVC9tMkF1dGt1V3h2enNLUnVUZkF2dDdwZUhkZ0JDcldyQWRsVlVkWlFud0tBClFOU0RjSHQxQWdNQkFBRUNnZ0VBSkpRN0t3QlZ2TzN4MzViZTg4Nk9FTnF1Z3E5d0FTeVVmOWRyODcrNTIzUnAKRmZyeXdnelBlOVdMNFgyTjVmTjA3bVNtL05VeEpjRkJnWHF4eWlaSFJSdkFVcFhZSFdxY3NGaFMvVkRtL2N0QQpHTU80bUpGby9JbGtmUy9ONDNiUXdhTG9mWUVidTBVSzBoL3VUVmJ4Q1BnalVpUWdNN2F0OS9lMkp2U1B1UGlECkVXNlZNMHdzeEw0ZFN1ZDhFc1lVZTRCTy9HT2dhQklUK0Y4VmxaM3NuNlZSckxVbmxaZlYyZ3pmYW9tMGtkM1IKQkk4L3o2bUl2UEl5UmJFZkJwMXExSzNqOEdFNWRkbjJIUnA2dU9PN25tTWFGbjE3UDVYM1cvaHpWOCtsYms0cAptUG02UzVGRzZxS3A4Y0hJMDZLcnF5MWRyUzJBOTB2TU1ZaGNMYzg5RVFLQmdRRFVKVmIyejhaVzc1VkFZc0tVCkFmZmUzQjcxTXhRL1k4akJjOWZMbGVDYUN4eURyblJvRXAyVFRueEl0d3N2Z1hIcStMbytTVEduTkJ1WkxYZFEKN1BIVkZuK2UzQ0tvazAxc2NQZzV6SnJ2TVJZNHJaRXhCeTQ4RVEvanZFQlJxa0txUUo4MzNRVzF1Z2xESHA5LwpOT0dTbEo2b3QwVGd4endXSVc0dkRjUi9SUUtCZ1FEUTd1djBvVnkzNm1zeEdiSjJEby96a0kzM2hBYXZSWFVTCmdEcWdBK2Q3N2h1VnYrbVg5UHpKWDhXbjFZa0lUZ1VLMlY5RndqaUtUMG56L0lKWjcwTTFDNy9CSDU1RVZLcEwKS0Evazg1V0I2eWVwZEY0YTM5c0djUi9NSlBLS0xldE4wcVJabGxlZ0wzNkF0UEt4MWJjVVU1S3RsMXZXUlNhagpoQlVwcWtqMmNRS0JnQm5QNlVMaWlQbHU4VFFDVURaOS90REk2Nk5kOGFxODAySm1XKzFUY1I2TkY0MFdIdWZDCnpCVnVTVVQzc0k2NUswa3h0a2Q1MUdiSnVrbnE5RWVPYk9aR2RJUzV1Q1hXdG1icFgrcDRjS21GeVhSZitmaUQKTFNiMTFIOGJHcUJWSFFObUZYbFFsUzlGVVhjdk5LemZuRXFmZHFhRWxnYmJkdjRpVnl1MmV5QVpBb0dBV0hINwp3c2dZTnVidVQ0L0FRMGV3Mm51RURaWi9PZTBlUFNHNUw0blhrVmZmcDRuaE9lbUVwVDU4cnFxdllxdWNhTlpTCkJYYk5kb2RRR0EvNW9sYXR6YVBXbmN0anRTdGVGNGl6Q2NtdnJacTlaSGVWYXF6K3pBQlJaSnJ6YlZrNDllM0kKa3dBWXdmKzQvb1ViQS9zamtHQThoRzNCZTdnMFBoNG8wMFY1czVFQ2dZQWtJbjMvd090R3h5QVVvTG8zRE45bwpac3hFbUhLSnJ3cWM4YUJtRzRxcW9mTVVGWW11RlhpRVQ0SlFTSnVxUkZQdG1ZTi9NOHdvZ1ZWWnJUdi8vV0VlCnFUYVhWL0toUEJmL1VaUlo1dnAyZlB1eWE4OFpLNkI0bmRjeVNyZzEyekJ0UUEwMDJFbXlNZDVJYVhFNkRXSlYKNm5jS05wK3JXUmx1bEVGNUU1dEJrdz09Ci0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0K",
            );

            const token = await tb.createToken({
                identity: "wbfletch@gmail.com",
            });

            return { token };
        },
    ],
    decorators: [
        (Story, { loaded: { token } }) => (
            <TractorbeamProvider token={token} apiURL="http://localhost:4000">
                <Story />
            </TractorbeamProvider>
        ),
    ],
};

export default preview;
